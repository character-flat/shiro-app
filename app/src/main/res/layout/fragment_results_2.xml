<?xml version="1.0" encoding="utf-8"?>

<RelativeLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        xmlns:tools="http://schemas.android.com/tools"
        xmlns:app="http://schemas.android.com/apk/res-auto"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:orientation="vertical"
        android:clickable="true"
        android:fitsSystemWindows="true"
        tools:ignore="KeyboardInaccessibleWidget">
    <com.discord.panels.OverlappingPanelsLayout
            android:layout_alignParentTop="true"
            android:layout_above="@+id/cast_mini_controller_holder"
            android:id="@+id/overlapping_panels"
            android:layout_width="match_parent"
            android:layout_height="match_parent">
        <androidx.core.widget.NestedScrollView
                android:orientation="vertical"
                android:id="@+id/start_panel"
                android:layout_width="match_parent"
                android:layout_marginEnd="20dp"
                android:layout_height="match_parent"
                android:layout_gravity="start">
            <LinearLayout
                    android:layout_width="match_parent" android:layout_height="match_parent"
                    android:orientation="vertical">
                <TextView
                        android:id="@+id/relatedTextView"
                        android:layout_marginTop="10dp"
                        android:layout_marginBottom="10dp"
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content"
                        android:text="Related"
                        android:textSize="18sp"
                        android:gravity="center"
                >
                </TextView>
                <com.lagradost.shiro.ui.AutofitRecyclerView
                        app:layoutManager="androidx.recyclerview.widget.LinearLayoutManager"
                        android:id="@+id/relatedScrollView"
                        tools:listitem="@layout/home_card"
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content"
                        style="@style/HomeCategoriesResView"
                >
                </com.lagradost.shiro.ui.AutofitRecyclerView>
                <TextView
                        android:id="@+id/recommendationsTextView"
                        android:layout_marginTop="10dp"
                        android:layout_marginBottom="10dp"
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content"
                        android:text="Recommendations"
                        android:textSize="18sp"
                        android:gravity="center"
                >
                </TextView>
                <com.lagradost.shiro.ui.AutofitRecyclerView
                        app:layoutManager="androidx.recyclerview.widget.LinearLayoutManager"
                        android:id="@+id/recommendationsScrollView"
                        tools:listitem="@layout/home_card"
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content"
                        style="@style/HomeCategoriesResView"
                >
                </com.lagradost.shiro.ui.AutofitRecyclerView>
            </LinearLayout>

        </androidx.core.widget.NestedScrollView>
        <FrameLayout
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:id="@+id/center_panel"
                android:transitionName="shared_element_container"
        >
            <androidx.cardview.widget.CardView
                    android:id="@+id/title_holder"
                    android:layout_width="match_parent"
                    android:layout_height="match_parent"
                    app:cardElevation="4dp"
                    app:cardCornerRadius="0dp"
            >
                <FrameLayout
                        android:id="@+id/results_banner_holder"
                        android:layout_width="match_parent"
                        android:layout_height="200dp">
                    <ImageView
                            android:id="@+id/results_banner"
                            android:layout_width="match_parent"
                            android:layout_height="match_parent"
                            tools:src="@drawable/one_piece"
                            android:scaleType="centerCrop"
                            android:alpha="0.7"
                    >
                    </ImageView>
                    <ImageView
                            android:id="@+id/banner_play_btt"
                            android:scaleType="centerInside"
                            android:layout_width="match_parent"
                            android:layout_height="200dp"
                            android:scaleX="0.3"
                            android:scaleY="0.3"
                            android:src="@drawable/netflix_play_btt"
                    >
                    </ImageView>

                </FrameLayout>

                <androidx.core.widget.NestedScrollView
                        android:id="@+id/fragment_results_nested_scrollview"
                        android:layout_width="match_parent"
                        android:layout_height="match_parent"
                        android:backgroundTint="@color/transparent"
                >

                    <LinearLayout
                            android:orientation="vertical"
                            android:layout_width="match_parent"
                            android:layout_height="match_parent"
                    >
                        <!-- Needs to be done instead of marginTop to allow clicking -->
                        <View
                                android:background="@android:color/transparent"
                                android:id="@+id/spacer"
                                android:layout_width="match_parent"
                                android:layout_height="190dp">

                        </View>
                        <LinearLayout
                                android:paddingTop="20dp"
                                android:layout_marginStart="-1dp"
                                android:layout_marginEnd="-1dp"
                                android:layout_width="match_parent"
                                android:layout_height="wrap_content"
                                android:orientation="vertical"
                                android:clipToPadding="false"
                                android:clipChildren="false"
                        >
                            <androidx.cardview.widget.CardView
                                    android:layout_width="match_parent"
                                    android:layout_height="match_parent"
                                    app:cardCornerRadius="11dp"
                                    android:layout_marginTop="-20dp"
                                    android:id="@+id/site_data_card_view"
                            >

                                <LinearLayout
                                        android:layout_width="match_parent"
                                        android:layout_height="match_parent"
                                        android:orientation="vertical"
                                >
                                    <LinearLayout
                                            android:layout_width="match_parent"
                                            android:layout_height="wrap_content"
                                            android:orientation="horizontal"
                                    >
                                        <androidx.cardview.widget.CardView
                                                android:layout_marginTop="15dp"
                                                android:layout_marginStart="15dp"
                                                android:layout_width="wrap_content"
                                                android:layout_height="wrap_content"
                                                app:cardCornerRadius="10dp"
                                                app:cardBackgroundColor="?attr/backgroundColorDark"
                                                android:elevation="10dp"
                                        >

                                            <!-- Width: 1280, Height 1802 -->
                                            <ImageView
                                                    android:foreground="?attr/selectableItemBackgroundBorderless"
                                                    android:id="@+id/title_background"
                                                    android:layout_width="107dp"
                                                    android:layout_height="150dp"
                                                    android:scaleType="centerCrop"
                                                    android:alpha="1"
                                                    android:clickable="true"
                                                    android:focusable="true"
                                                    android:nextFocusDown="@id/title_descript"
                                                    tools:src="@drawable/one_piece_poster"
                                            />

                                        </androidx.cardview.widget.CardView>
                                        <LinearLayout
                                                android:layout_width="match_parent"
                                                android:layout_height="wrap_content"
                                                android:layout_margin="15dp"
                                                android:orientation="vertical"
                                        >

                                            <TextView
                                                    android:layout_width="match_parent"
                                                    android:layout_height="wrap_content"
                                                    android:gravity="start"
                                                    tools:text="The Promised Neverland"
                                                    android:id="@+id/title_name"
                                                    android:textColor="?attr/textColor"
                                                    android:textStyle="bold"
                                                    android:textSize="17sp"
                                                    android:layout_marginBottom="10dp"
                                            >
                                            </TextView>
                                            <TextView
                                                    android:id="@+id/title_status"
                                                    android:layout_width="match_parent"
                                                    android:layout_height="wrap_content"
                                                    android:textColor="?attr/textColorGrayWhite"
                                                    tools:text="Status: Finished"
                                                    android:textSize="12sp"
                                                    android:layout_marginBottom="10dp"
                                            >
                                            </TextView>
                                            <TextView
                                                    android:id="@+id/title_genres"
                                                    android:layout_width="match_parent"
                                                    android:layout_height="wrap_content"
                                                    android:textColor="?attr/textColorGrayWhite"
                                                    tools:text="Genres: Sci-Fi, Mystery, Horror"
                                                    android:textSize="12sp"
                                                    android:layout_marginBottom="10dp"
                                            >
                                            </TextView>
                                            <TextView
                                                    android:id="@+id/title_episodes"
                                                    android:layout_width="match_parent"
                                                    android:layout_height="wrap_content"
                                                    android:textColor="?attr/textColorGrayWhite"
                                                    tools:text="Episodes: 12"
                                                    android:textSize="12sp"
                                                    android:layout_marginBottom="10dp"
                                            >
                                            </TextView>
                                            <TextView
                                                    android:id="@+id/title_year"
                                                    android:layout_width="match_parent"
                                                    android:layout_height="wrap_content"
                                                    android:textColor="?attr/textColorGrayWhite"
                                                    tools:text="Year: 2020"
                                                    android:textSize="12sp"
                                                    android:layout_marginBottom="10dp"
                                            >
                                            </TextView>
                                            <TextView
                                                    android:id="@+id/title_day_of_week"
                                                    android:layout_width="match_parent"
                                                    android:layout_height="wrap_content"
                                                    android:textColor="?attr/textColorGrayWhite"
                                                    tools:text="Schedule: Tuesday"
                                                    android:textSize="12sp"
                                            >
                                            </TextView>
                                        </LinearLayout>

                                    </LinearLayout>
                                    <com.google.android.material.textview.MaterialTextView
                                            android:background="@drawable/outline_background"
                                            android:layout_margin="10dp"
                                            android:id="@+id/title_descript"
                                            android:layout_width="match_parent"
                                            android:layout_height="wrap_content"
                                            android:textColor="?attr/textColor"
                                            tools:text="The orphans at Grace Field House have only ever known peace. Their home is nice, their bellies stay full, and their caretaker, Mom, loves them very much. But their world turns upside down when the smartest children of the bunch—Emma, Ray, and Norman—learn what horror awaits them on adoption day. Now, their cultivated wit may be their only chance of survival. (Source: Funimation)"
                                    >

                                    </com.google.android.material.textview.MaterialTextView>
                                </LinearLayout>

                            </androidx.cardview.widget.CardView>

                            <!-- This hack is to allow background between the cards while retaining the corner radius -->
                            <LinearLayout
                                    android:orientation="vertical"
                                    android:layout_width="match_parent"
                                    android:layout_height="35dp"
                                    android:layout_marginTop="-10dp"
                                    android:layout_marginBottom="-10dp"
                                    android:id="@+id/card_spacer"
                                    tools:background="@android:color/black"
                            />

                            <androidx.cardview.widget.CardView
                                    android:layout_width="match_parent"
                                    android:layout_height="wrap_content"
                                    app:cardCornerRadius="10dp"
                                    android:id="@+id/episodes_res_view_holder"
                            >
                                <androidx.recyclerview.widget.RecyclerView
                                        android:layout_marginTop="5dp"
                                        android:layout_marginStart="5dp"
                                        android:layout_marginEnd="5dp"
                                        app:layoutManager="androidx.recyclerview.widget.LinearLayoutManager"
                                        android:clipToPadding="false"
                                        android:descendantFocusability="blocksDescendants"
                                        android:layout_width="match_parent"
                                        android:layout_height="wrap_content"
                                        android:id="@+id/episodes_res_view"
                                        android:orientation="vertical"
                                        tools:minHeight="250dp"
                                        tools:layout_height="250dp"
                                        tools:listitem="@layout/episode_expander"
                                >
                                    <requestFocus/>
                                </androidx.recyclerview.widget.RecyclerView>
                            </androidx.cardview.widget.CardView>


                        </LinearLayout>
                    </LinearLayout>

                </androidx.core.widget.NestedScrollView>

            </androidx.cardview.widget.CardView>

            <FrameLayout
                    android:layout_width="match_parent"
                    android:layout_height="match_parent"
            >
                <FrameLayout
                        android:background="?attr/backgroundColor"
                        tools:visibility="gone"
                        android:id="@+id/loading_overlay"
                        android:layout_width="match_parent"
                        android:layout_height="match_parent"
                >
                    <LinearLayout
                            android:layout_width="match_parent"
                            android:layout_height="match_parent"
                            android:orientation="vertical"
                            android:gravity="center"
                    >
                        <ProgressBar
                                android:layout_width="50dp"
                                android:layout_height="50dp"
                                android:id="@+id/main_load"
                        >
                        </ProgressBar>
                        <Button
                                android:visibility="gone"
                                android:text="Open website"
                                android:layout_margin="50dp"
                                android:backgroundTint="?attr/textColor"
                                android:textColor="?attr/backgroundColor"
                                android:gravity="center"
                                android:layout_gravity="center"
                                android:id="@+id/open_website_btt"
                                android:layout_width="wrap_content"
                                android:layout_height="50dp"
                        >
                        </Button>
                    </LinearLayout>
                </FrameLayout>
            </FrameLayout>

        </FrameLayout>
        <ScrollView
                tools:visibility="gone"
                android:id="@+id/end_panel"
                android:layout_width="wrap_content"
                android:layout_height="match_parent"
                android:layout_gravity="end"
                android:fillViewport="true"
        >

            <include layout="@layout/fragment_results_sync_page"/>
        </ScrollView>
    </com.discord.panels.OverlappingPanelsLayout>

    <LinearLayout
            android:background="@color/transparent"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:id="@+id/cast_mini_controller_holder"
            android:layout_above="@+id/fragment_results_toolbar"
    >

        <fragment
                app:castControlButtons="@array/cast_mini_controller_control_buttons"
                android:id="@+id/cast_mini_controller"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:visibility="gone"
                tools:visibility="visible"
                tools:layout_height="100dp"
                tools:layout_width="match_parent"
                class="com.lagradost.shiro.ui.MyMiniControllerFragment"
                tools:ignore="FragmentTagUsage">

        </fragment>
    </LinearLayout>

    <HorizontalScrollView
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_alignParentBottom="true"
            android:id="@+id/fragment_results_toolbar"
            android:fillViewport="true"
    >

        <RelativeLayout
                android:layout_margin="5dp"
                app:layout_constraintTop_toBottomOf="parent"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:orientation="horizontal"
        >
            <ImageView
                    android:id="@+id/go_back_btt"
                    android:layout_width="50dp"
                    android:layout_height="50dp"
                    android:padding="10dp"
                    android:elevation="10dp"
                    android:layout_alignParentStart="true"
                    android:background="@drawable/video_tap_button"
                    app:srcCompat="@drawable/arrow_back"
                    android:layout_gravity="center"
            />

            <androidx.mediarouter.app.MediaRouteButton
                    android:id="@+id/media_route_button"
                    android:layout_width="50dp"
                    android:layout_height="50dp"
                    android:mediaRouteTypes="user"
                    android:visibility="gone"
                    android:minWidth="50dp"
                    tools:visibility="visible"
                    android:layout_toStartOf="@+id/language_btt"/>

            <ImageView
                    android:id="@+id/language_btt"
                    android:layout_width="50dp"
                    android:layout_height="50dp"
                    android:padding="10dp"
                    android:elevation="10dp"
                    android:layout_toStartOf="@+id/share_btt"
                    android:background="@drawable/video_tap_button"
                    app:srcCompat="@drawable/ic_baseline_language_24"
                    android:layout_gravity="center"
            />
            <ImageView
                    android:layout_toStartOf="@+id/edit_button"
                    android:padding="10dp"
                    android:layout_width="50dp"
                    android:layout_height="50dp"
                    android:layout_gravity="center"
                    android:focusable="true"
                    android:clickable="true"
                    android:id="@+id/share_btt"
                    app:srcCompat="@drawable/ic_baseline_share_24"
                    android:background="@drawable/video_tap_button">
            </ImageView>
            <ImageView
                    android:id="@+id/edit_button"
                    android:layout_width="50dp"
                    android:layout_height="50dp"
                    android:padding="10dp"
                    android:elevation="10dp"
                    android:layout_toStartOf="@+id/subscribe_btt"
                    android:background="@drawable/video_tap_button"
                    app:srcCompat="@drawable/ic_outline_edit_24"
                    android:layout_gravity="center"
                    android:contentDescription="Override sync id"/>


            <ImageView
                    android:layout_toStartOf="@+id/bookmark_btt"
                    android:layout_width="50dp"
                    android:layout_height="50dp"
                    android:layout_gravity="center"
                    android:padding="10dp"
                    android:focusable="true"
                    android:clickable="true"
                    android:src="@drawable/ic_baseline_notifications_none_24"
                    android:id="@+id/subscribe_btt"
                    android:background="@drawable/video_tap_button">
            </ImageView>

            <ImageView
                    android:src="@drawable/outlined_heart"
                    android:layout_width="50dp"
                    android:layout_height="50dp"
                    android:padding="10dp"
                    android:layout_gravity="center"
                    android:focusable="true"
                    android:clickable="true"
                    android:id="@+id/bookmark_btt"
                    android:layout_alignParentEnd="true"
                    android:background="@drawable/video_tap_button">
            </ImageView>
        </RelativeLayout>
    </HorizontalScrollView>

</RelativeLayout>
