<?xml version="1.0" encoding="utf-8"?>
<FrameLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        xmlns:app="http://schemas.android.com/apk/res-auto"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        xmlns:tools="http://schemas.android.com/tools"
        android:background="?attr/backgroundColor"
        android:id="@+id/results_root"
        android:animateLayoutChanges="false"
>
    <ImageView
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:scaleType="centerCrop"
            android:alpha="0.3"
            android:background="?attr/backgroundColor"
            android:id="@+id/result_poster_blur">
    </ImageView>

    <LinearLayout android:layout_width="match_parent"
                  android:layout_height="match_parent">

        <androidx.cardview.widget.CardView
                android:id="@+id/title_holder"
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:backgroundTint="@color/grayBackground"
                app:cardCornerRadius="8dp"
                app:cardElevation="4dp"

        >
            <RelativeLayout
                    android:background="?attr/backgroundColor"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:orientation="horizontal"
                    android:paddingTop="10dp"
                    android:paddingStart="10dp"
                    android:paddingEnd="10dp"
                    android:paddingBottom="10dp"
                    android:elevation="1dp"
                    android:clipChildren="false"
            >
                <!--
                Moved back button to overlay!
                <FrameLayout

                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:id="@+id/title_go_back_holder"
                >
                    <ImageView
                            android:layout_width="30dp"
                            android:layout_height="30dp"
                            android:layout_gravity="center"
                            android:src="@drawable/arrow_back">
                    </ImageView>
                    <ImageView
                            android:id="@+id/title_go_back"
                            android:layout_width="50dp"
                            android:layout_height="50dp"
                            android:layout_gravity="center"
                            android:focusable="true"
                            android:clickable="true"
                            android:background="@drawable/video_tap_button">
                    </ImageView>
                </FrameLayout>-->
                <FrameLayout
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:id="@+id/media_route_button_holder"
                        android:layout_toStartOf="@+id/edit_button">
                    <androidx.mediarouter.app.MediaRouteButton
                            android:layout_width="50dp"
                            android:layout_height="50dp"
                            android:mediaRouteTypes="user"
                            android:visibility="gone"
                            tools:visibility="visible"
                    />
                </FrameLayout>

                <ImageView
                        android:id="@+id/edit_button"
                        android:layout_width="50dp"
                        android:layout_height="50dp"
                        android:padding="10dp"
                        android:elevation="10dp"
                        android:visibility="visible"
                        android:layout_toStartOf="@+id/language_button_holder"
                        android:background="@drawable/video_tap_button"
                        app:srcCompat="@drawable/ic_outline_edit_24"
                        android:layout_gravity="center"
                        android:contentDescription="Override sync id"
                        app:tint="?attr/white"/>

                <FrameLayout
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:id="@+id/language_button_holder"
                        android:visibility="gone"
                        tools:visibility="visible"
                        android:layout_toStartOf="@+id/title_play_holder"
                >
                    <ImageView
                            android:layout_width="30dp"
                            android:layout_height="30dp"
                            android:elevation="10dp"
                            android:background="@color/transparent"
                            app:srcCompat="@drawable/ic_baseline_language_24"
                            android:layout_gravity="center"
                            android:contentDescription="Switch language"/>
                    <ImageView
                            android:layout_width="50dp"
                            android:layout_height="50dp"
                            android:layout_gravity="center"
                            android:focusable="true"
                            android:clickable="true"
                            android:id="@+id/language_button"
                            android:nextFocusLeft="@id/title_go_back"
                            android:nextFocusRight="@id/next_episode_btt"
                            android:background="?attr/selectableItemBackgroundBorderless">
                    </ImageView>
                </FrameLayout>
                <FrameLayout
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:id="@+id/title_play_holder"
                        android:clipChildren="false"
                        android:clipToPadding="false"
                        android:layout_toStartOf="@+id/title_bookmark_holder"
                >
                    <ImageView
                            android:layout_width="30dp"
                            android:layout_height="30dp"
                            android:background="@color/transparent"
                            app:srcCompat="@drawable/netflix_play"
                            android:layout_gravity="center"
                            android:id="@+id/next_episode_btt_img"
                            android:contentDescription="Play next episode"
                            app:tint="?attr/white"
                    />
                    <ImageView
                            android:layout_width="50dp"
                            android:layout_height="50dp"
                            android:layout_gravity="center"
                            android:focusable="true"
                            android:clickable="true"
                            android:background="?attr/selectableItemBackgroundBorderless"
                            app:tint="?attr/white">
                    </ImageView>
                </FrameLayout>


                <FrameLayout
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:id="@+id/title_bookmark_holder"
                        android:clipChildren="false"
                        android:clipToPadding="false"
                        android:layout_alignParentEnd="true"
                >
                    <ImageView
                            android:id="@+id/title_bookmark"
                            android:layout_width="30dp"
                            android:layout_height="30dp"
                            app:srcCompat="@drawable/outlined_heart"
                            android:background="@color/transparent"
                            android:layout_gravity="center"
                            android:contentDescription="@string/bookmark_btt_hint"
                    />
                    <ImageView
                            android:layout_width="50dp"
                            android:layout_height="50dp"
                            android:layout_gravity="center"
                            android:focusable="true"
                            android:clickable="true"
                            android:id="@+id/bookmark_holder"
                            android:background="?attr/selectableItemBackgroundBorderless"
                    >
                    </ImageView>
                </FrameLayout>
            </RelativeLayout>
            <androidx.core.widget.NestedScrollView
                    android:layout_marginTop="70dp"
                    android:background="?attr/backgroundColor"
                    android:layout_width="match_parent"
                    android:layout_height="match_parent"
            >
                <LinearLayout
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content"
                        android:orientation="vertical"
                >
                    <LinearLayout
                            android:layout_width="match_parent"
                            android:layout_height="wrap_content"
                    >

                        <androidx.cardview.widget.CardView
                                android:layout_marginTop="15dp"
                                android:layout_marginStart="15dp"
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                app:cardCornerRadius="10dp"
                                app:cardBackgroundColor="?attr/backgroundColorDark"
                                android:elevation="10dp"
                        >

                            <!-- Width: 1280, Height 1802 -->
                            <ImageView
                                    android:foreground="?attr/selectableItemBackgroundBorderless"
                                    android:id="@+id/title_background"
                                    android:layout_width="107dp"
                                    android:layout_height="150dp"
                                    android:scaleType="centerCrop"
                                    android:alpha="1"
                                    android:clickable="false"
                                    android:focusable="false"
                            />

                        </androidx.cardview.widget.CardView>
                        <LinearLayout
                                android:layout_width="match_parent"
                                android:layout_height="wrap_content"
                                android:layout_margin="15dp"
                                android:orientation="vertical"
                        >
                            <TextView
                                    android:layout_width="match_parent"
                                    android:layout_height="wrap_content"
                                    android:gravity="start"
                                    tools:text="The Promised Neverland"
                                    android:id="@+id/title_name"
                                    android:textColor="?attr/textColor"
                                    android:textStyle="bold"
                                    android:textSize="17sp"
                                    android:layout_marginBottom="10dp"
                            >
                            </TextView>
                            <TextView
                                    android:id="@+id/title_status"
                                    android:layout_width="match_parent"
                                    android:layout_height="wrap_content"
                                    android:textColor="?attr/textColorGrayWhite"
                                    tools:text="Status: Finished"
                                    android:textSize="12sp"
                                    android:layout_marginBottom="10dp"
                            >
                            </TextView>
                            <TextView
                                    android:id="@+id/title_genres"
                                    android:layout_width="match_parent"
                                    android:layout_height="wrap_content"
                                    android:textColor="?attr/textColorGrayWhite"
                                    tools:text="Genres: Sci-Fi, Mystery, Horror"
                                    android:textSize="12sp"
                                    android:layout_marginBottom="10dp"
                            >
                            </TextView>
                            <TextView
                                    android:id="@+id/title_episodes"
                                    android:layout_width="match_parent"
                                    android:layout_height="wrap_content"
                                    android:textColor="?attr/textColorGrayWhite"
                                    tools:text="Episodes: 12"
                                    android:textSize="12sp"
                                    android:layout_marginBottom="10dp"
                            >
                            </TextView>
                            <TextView
                                    android:id="@+id/title_year"
                                    android:layout_width="match_parent"
                                    android:layout_height="wrap_content"
                                    android:textColor="?attr/textColorGrayWhite"
                                    tools:text="Year: 2020"
                                    android:textSize="12sp"
                                    android:layout_marginBottom="10dp"
                            >
                            </TextView>
                            <TextView
                                    android:id="@+id/title_day_of_week"
                                    android:layout_width="match_parent"
                                    android:layout_height="wrap_content"
                                    android:textColor="?attr/textColorGrayWhite"
                                    tools:text="Schedule: Tuesday"
                                    android:textSize="12sp"
                            >
                            </TextView>
                        </LinearLayout>
                    </LinearLayout>


                    <LinearLayout
                            android:layout_width="match_parent"
                            android:layout_height="wrap_content"
                            android:layout_marginStart="10dp"
                            android:layout_marginEnd="10dp"
                            android:layout_marginTop="0dp"
                            android:layout_marginBottom="20dp"
                            android:id="@+id/anilist_holder"
                            android:visibility="gone"
                            tools:visibility="visible"
                            android:orientation="vertical">
                        <RelativeLayout
                                android:layout_width="match_parent"
                                android:layout_height="24dp"
                                android:layout_marginStart="10dp"
                                android:layout_marginEnd="10dp"
                                android:layout_marginTop="5dp"
                                android:layout_marginBottom="20dp"
                                android:orientation="horizontal">
                            <TextView
                                    android:layout_width="wrap_content"
                                    android:layout_height="wrap_content"
                                    android:id="@+id/anilist_progress_txt"
                                    tools:text="14/16"
                                    android:layout_centerVertical="true"
                                    android:layout_alignParentStart="true"
                            />
                            <androidx.core.widget.ContentLoadingProgressBar
                                    android:paddingTop="10dp"
                                    android:id="@+id/aniList_progressbar"
                                    android:layout_width="match_parent"
                                    android:indeterminate="false"
                                    tools:progress="50"
                                    android:layout_toStartOf="@+id/edit_episodes_btt"
                                    android:layout_toEndOf="@+id/anilist_progress_txt"
                                    android:layout_marginTop="-6.3dp"
                                    android:layout_marginStart="10dp"
                                    android:layout_marginEnd="10dp"
                                    style="@android:style/Widget.Material.ProgressBar.Horizontal"
                                    android:layout_height="wrap_content"
                            >
                            </androidx.core.widget.ContentLoadingProgressBar>
                            <!--TODO FIX FOR a19-->
                            <!--                                    android:background="?android:attr/selectableItemBackgroundBorderless"-->
                            <ImageView
                                    android:layout_width="wrap_content"
                                    android:layout_height="match_parent"
                                    android:layout_alignParentEnd="true"
                                    android:layout_centerVertical="true"
                                    app:srcCompat="@drawable/ic_outline_edit_24"
                                    android:background="?attr/selectableItemBackgroundBorderless"
                                    android:id="@+id/edit_episodes_btt"
                            >
                            </ImageView>
                        </RelativeLayout>
                        <LinearLayout
                                android:layout_width="match_parent"
                                android:layout_height="wrap_content"
                                android:orientation="horizontal">

                        </LinearLayout>
                        <LinearLayout
                                android:visibility="gone"
                                tools:visibility="visible"
                                android:id="@+id/anilist_btt_holder"
                                android:layout_width="match_parent"
                                android:layout_height="wrap_content"
                        >
                            <LinearLayout
                                    android:layout_weight="1"
                                    android:layout_width="0dp"
                                    android:layout_height="wrap_content"
                                    android:orientation="vertical"
                                    android:id="@+id/rating_btt_holder"
                            >
                                <ImageView
                                        android:background="?attr/selectableItemBackgroundBorderless"
                                        android:id="@+id/rating_btt"
                                        android:layout_width="30dp"
                                        android:layout_height="30dp"
                                        android:elevation="10dp"
                                        android:clickable="true"
                                        android:focusable="true"
                                        app:srcCompat="@drawable/ic_baseline_star_border_24"
                                        android:layout_gravity="center"
                                        app:tint="?attr/white"
                                        android:nextFocusUp="@id/edit_episodes_btt"
                                />
                                <TextView
                                        android:text="Rate"
                                        android:id="@+id/rating_text"
                                        android:layout_gravity="center"
                                        android:layout_width="wrap_content"
                                        android:layout_height="wrap_content">
                                </TextView>
                            </LinearLayout>
                            <LinearLayout
                                    android:layout_weight="1"
                                    android:layout_width="0dp"
                                    android:layout_height="wrap_content"
                                    android:orientation="vertical"
                                    android:id="@+id/status_btt_holder"
                            >
                                <ImageView
                                        android:background="?attr/selectableItemBackgroundBorderless"
                                        android:id="@+id/status_btt"
                                        android:layout_width="30dp"
                                        android:layout_height="30dp"
                                        android:elevation="10dp"
                                        android:clickable="true"
                                        android:focusable="true"
                                        app:srcCompat="@drawable/filled_viewstate"
                                        android:layout_gravity="center"
                                        android:nextFocusUp="@id/edit_episodes_btt"
                                        app:tint="?attr/white"
                                />

                                <TextView
                                        android:text="Status"
                                        android:id="@+id/status_text"
                                        android:layout_gravity="center"
                                        android:layout_width="wrap_content"
                                        android:layout_height="wrap_content">
                                </TextView>
                            </LinearLayout>

                            <LinearLayout
                                    android:layout_weight="1"
                                    android:layout_width="0dp"
                                    android:layout_height="wrap_content"
                                    android:orientation="vertical"
                                    android:id="@+id/title_anilist_holder"
                            >

                                <ImageView
                                        android:background="?attr/selectableItemBackgroundBorderless"
                                        android:id="@+id/title_anilist"
                                        android:layout_width="30dp"
                                        android:layout_height="30dp"
                                        android:elevation="10dp"
                                        android:clickable="true"
                                        android:focusable="true"
                                        android:nextFocusUp="@id/edit_episodes_btt"
                                        app:srcCompat="@drawable/ic_anilist_icon"
                                        android:layout_gravity="center"
                                        android:contentDescription="@string/anilist_btt_hint"/>
                                <TextView android:text="@string/anilist_btt"
                                          android:id="@+id/anilist_btt_text"
                                          android:layout_gravity="center" android:layout_width="wrap_content"
                                          android:layout_height="wrap_content">
                                </TextView>

                            </LinearLayout>

                            <LinearLayout
                                    android:layout_weight="1"
                                    android:layout_width="0dp"
                                    android:layout_height="wrap_content"
                                    android:orientation="vertical"
                                    android:id="@+id/title_mal_holder"
                                    android:visibility="gone"
                                    tools:visibility="visible"
                            >
                                <ImageView
                                        android:background="?attr/selectableItemBackgroundBorderless"
                                        android:id="@+id/title_mal"
                                        android:layout_width="30dp"
                                        android:layout_height="30dp"
                                        android:elevation="10dp"
                                        android:clickable="true"
                                        android:focusable="true"
                                        android:nextFocusUp="@id/edit_episodes_btt"
                                        app:srcCompat="@drawable/mal_logo"
                                        android:layout_gravity="center"
                                        android:contentDescription="@string/anilist_btt_hint"/>
                                <TextView android:text="MAL"
                                          android:id="@+id/mal_btt_text"
                                          android:layout_gravity="center" android:layout_width="wrap_content"
                                          android:layout_height="wrap_content">
                                </TextView>
                            </LinearLayout>
                        </LinearLayout>
                    </LinearLayout>
                    <LinearLayout
                            android:id="@+id/description_holder"
                            android:layout_width="match_parent"
                            android:layout_height="wrap_content">

                        <com.google.android.material.textview.MaterialTextView
                                android:background="@drawable/outline_background"
                                android:layout_margin="10dp"
                                android:id="@+id/title_descript"
                                android:layout_width="match_parent"
                                android:layout_height="wrap_content"
                                android:textColor="?attr/textColor"
                                android:nextFocusUp="@id/rating_btt"
                                tools:text="The orphans at Grace Field House have only ever known peace. Their home is nice, their bellies stay full, and their caretaker, Mom, loves them very much. But their world turns upside down when the smartest children of the bunch—Emma, Ray, and Norman—learn what horror awaits them on adoption day. Now, their cultivated wit may be their only chance of survival. (Source: Funimation)"
                        />
                    </LinearLayout>

                    <androidx.constraintlayout.widget.ConstraintLayout
                            android:layout_width="match_parent"
                            android:layout_height="24dp"
                            android:layout_marginTop="5dp"
                            android:layout_marginBottom="5dp"
                            android:id="@+id/episodes_text_holder"
                    >
                        <androidx.cardview.widget.CardView
                                android:backgroundTint="?attr/textColorGray"
                                app:layout_constraintStart_toStartOf="parent"
                                app:layout_constraintEnd_toStartOf="@+id/episodes_text"
                                app:layout_constraintTop_toTopOf="parent"
                                app:layout_constraintBottom_toBottomOf="parent"
                                android:id="@+id/startLine"
                                android:layout_width="0dp"
                                android:layout_height="2dp"
                                android:layout_marginEnd="20dp"
                                android:layout_marginStart="20dp"
                        >

                        </androidx.cardview.widget.CardView>
                        <TextView
                                android:textSize="17sp"
                                android:textColor="?attr/textColor"
                                app:layout_constraintStart_toEndOf="@id/startLine"
                                app:layout_constraintEnd_toStartOf="@id/endLine"
                                app:layout_constraintTop_toTopOf="parent"
                                app:layout_constraintBottom_toBottomOf="parent"
                                android:id="@+id/episodes_text"
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:text="@string/episodes"
                                android:textStyle="bold"
                        >

                        </TextView>
                        <androidx.cardview.widget.CardView
                                android:backgroundTint="?attr/textColorGray"
                                android:layout_marginEnd="20dp"
                                android:layout_marginStart="20dp"
                                app:layout_constraintEnd_toEndOf="parent"
                                app:layout_constraintStart_toEndOf="@id/episodes_text"
                                app:layout_constraintTop_toTopOf="parent"
                                app:layout_constraintBottom_toBottomOf="parent"
                                android:id="@+id/endLine"
                                android:layout_width="0dp"
                                android:layout_height="2dp"
                        >

                        </androidx.cardview.widget.CardView>

                    </androidx.constraintlayout.widget.ConstraintLayout>
                    <androidx.recyclerview.widget.RecyclerView
                            app:layoutManager="androidx.recyclerview.widget.LinearLayoutManager"
                            android:clipToPadding="false"
                            android:descendantFocusability="afterDescendants"
                            android:paddingBottom="100dp"
                            android:layout_marginEnd="10dp"
                            android:layout_marginStart="10dp"
                            android:layout_marginTop="10dp"
                            android:layout_width="match_parent"
                            android:layout_height="wrap_content"
                            android:id="@+id/episodes_res_view"
                            android:orientation="vertical"
                            android:minHeight="250dp"
                            tools:layout_height="300dp"
                            tools:listitem="@layout/episode_expander"
                    >
                        <requestFocus/>
                    </androidx.recyclerview.widget.RecyclerView>
                </LinearLayout>
            </androidx.core.widget.NestedScrollView>
        </androidx.cardview.widget.CardView>
    </LinearLayout>
    <LinearLayout
            android:background="@color/transparent"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="bottom"
    >

        <fragment
                app:castControlButtons="@array/cast_mini_controller_control_buttons"
                android:id="@+id/cast_mini_controller"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:visibility="gone"
                class="com.lagradost.shiro.ui.MyMiniControllerFragment"
                tools:ignore="FragmentTagUsage">
        </fragment>
    </LinearLayout>
    <FrameLayout
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:background="@color/transparent"
    >
        <FrameLayout
                android:background="?attr/backgroundColor"
                tools:visibility="gone"
                android:id="@+id/loading_overlay"
                android:layout_width="match_parent"
                android:layout_height="match_parent"
        >
            <ProgressBar
                    android:layout_width="50dp"
                    android:layout_height="50dp"
                    android:layout_gravity="center"
                    android:id="@+id/main_load"
            >
            </ProgressBar>
        </FrameLayout>
        <ImageView
                android:layout_margin="20dp"
                android:layout_width="30dp"
                android:layout_height="30dp"
                android:layout_gravity="top|start"
                app:srcCompat="@drawable/arrow_back">
        </ImageView>
        <ImageView
                android:layout_margin="10dp"
                android:id="@+id/title_go_back"
                android:layout_width="50dp"
                android:layout_height="50dp"
                android:layout_gravity="top|start"
                android:focusable="true"
                android:clickable="true"
                android:nextFocusRight="@id/share_holder"
                android:background="?attr/selectableItemBackgroundBorderless">
        </ImageView>
    </FrameLayout>

</FrameLayout>
